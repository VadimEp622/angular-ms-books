import{b as x,k as b,l as U,y as v}from"./chunk-FL5RJCFA.js";import{J as h,N as u,S as p,i as d,l as g,pa as k,w as I}from"./chunk-GYHKD6BH.js";var C=(()=>{let o=class o{constructor(e,t){this.document=e,this.platformId=t,this.documentIsAccessible=b(this.platformId)}static getCookieRegExp(e){let t=e.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+t+"|;\\s*"+t+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch{return e}}check(e){return this.documentIsAccessible?(e=encodeURIComponent(e),o.getCookieRegExp(e).test(this.document.cookie)):!1}get(e){if(this.documentIsAccessible&&this.check(e)){e=encodeURIComponent(e);let s=o.getCookieRegExp(e).exec(this.document.cookie);return s[1]?o.safeDecodeURIComponent(s[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let e={},t=this.document;return t.cookie&&t.cookie!==""&&t.cookie.split(";").forEach(s=>{let[c,n]=s.split("=");e[o.safeDecodeURIComponent(c.replace(/^ /,""))]=o.safeDecodeURIComponent(n)}),e}set(e,t,s,c,n,a,f){if(!this.documentIsAccessible)return;if(typeof s=="number"||s instanceof Date||c||n||a||f){let m={expires:s,path:c,domain:n,secure:a,sameSite:f||"Lax"};this.set(e,t,m);return}let l=encodeURIComponent(e)+"="+encodeURIComponent(t)+";",i=s||{};if(i.expires)if(typeof i.expires=="number"){let m=new Date(new Date().getTime()+i.expires*1e3*60*60*24);l+="expires="+m.toUTCString()+";"}else l+="expires="+i.expires.toUTCString()+";";i.path&&(l+="path="+i.path+";"),i.domain&&(l+="domain="+i.domain+";"),i.secure===!1&&i.sameSite==="None"&&(i.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),i.secure&&(l+="secure;"),i.sameSite||(i.sameSite="Lax"),l+="sameSite="+i.sameSite+";",this.document.cookie=l}delete(e,t,s,c,n="Lax"){if(!this.documentIsAccessible)return;let a=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(e,"",{expires:a,path:t,domain:s,secure:c,sameSite:n})}deleteAll(e,t,s,c="Lax"){if(!this.documentIsAccessible)return;let n=this.getAll();for(let a in n)n.hasOwnProperty(a)&&this.delete(a,e,t,s,c)}};o.\u0275fac=function(t){return new(t||o)(p(x),p(k))},o.\u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();var y="auth",S=(()=>{let o=class o{constructor(e,t){this.http=e,this.cookieService=t,this.baseUrl=v.api_url+y,this._loggedInUser$=new d(null),this.loggedInUser$=this._loggedInUser$.asObservable()}login(e){return this.http.post(`${this.baseUrl}/login`,e,{withCredentials:!0}).pipe(h(t=>this._loggedInUser$.next(t)))}loginByToken(e){return this.http.post(`${this.baseUrl}/token-login`,{token:e},{withCredentials:!0}).pipe(h(t=>this._loggedInUser$.next(t)),I(t=>(this._loggedInUser$.next(null),t.status===0?console.error("An error occurred:",t.error):console.error(`Backend returned code ${t.status}, body was: `,t.error),g())))}signup(e){return this.http.post(`${this.baseUrl}/signup`,e,{withCredentials:!0}).pipe(h(t=>this._loggedInUser$.next(t)))}logout(e){return this.http.post(`${this.baseUrl}/logout`,e,{withCredentials:!0}).pipe(h(()=>this._loggedInUser$.next(null)))}getLoginCookieToken(){return this.cookieService.get("loginToken")}};o.\u0275fac=function(t){return new(t||o)(p(U),p(C))},o.\u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();var B=(()=>{let o=class o{constructor(){this._activeModal$=new d({modalType:null}),this.activeModal$=this._activeModal$.asObservable()}setModal(e,t){this._activeModal$.next({modalType:e,props:t})}closeModal(){this._activeModal$.next({modalType:null})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"});let r=o;return r})();export{C as a,S as b,B as c};
